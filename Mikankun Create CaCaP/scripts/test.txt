local code16 = {'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'}

function onCreate()
    --addHaxeLibrary('FunkinLua')
    runHaxeCode([[
        /*
        var folder = Paths.mods('Mikankun Create Charts and Covers' + '/custom_events/');
        var file = 'PhillyGlowLua';
        game.luaArray.push(new FunkinLua(folder + file));
        game.filesPushed.push(file);
        */
    ]])
    addLuaScript('Mikankun Create Charts and Covers/custom_events/PhillyGlowLua')
end

function onBeatHit()
    code = (code16[getRandomInt(1, 16)]..code16[getRandomInt(1, 16)]..code16[getRandomInt(1, 16)]..code16[getRandomInt(1, 16)]..code16[getRandomInt(1, 16)]..code16[getRandomInt(1, 16)])
    if curBeat == 2 then
        triggerEvent('PhillyGlowLua', '1', code)
    else
        if (curBeat % 2 == 0) then
            triggerEvent('PhillyGlowLua', '0', code)
            triggerEvent('PhillyGlowLua', '1', code)
        end
    end
end

function aopponentNoteHit(membersIndex, noteData, noteType, isSustainNote)
    if not mustHitSection then
        code = (code16[getRandomInt(1, 16)]..code16[getRandomInt(1, 16)]..code16[getRandomInt(1, 16)]..code16[getRandomInt(1, 16)]..code16[getRandomInt(1, 16)]..code16[getRandomInt(1, 16)])
        triggerEvent('PhillyGlowLua', '0', code)
        triggerEvent('PhillyGlowLua', '1', code)
    end
end

function agoodNoteHit(membersIndex, noteData, noteType, isSustainNote)
    if mustHitSection then
        code = (code16[getRandomInt(1, 16)]..code16[getRandomInt(1, 16)]..code16[getRandomInt(1, 16)]..code16[getRandomInt(1, 16)]..code16[getRandomInt(1, 16)]..code16[getRandomInt(1, 16)])
        triggerEvent('PhillyGlowLua', '0', code)
        triggerEvent('PhillyGlowLua', '1', code)
    end
end